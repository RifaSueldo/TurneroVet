<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Vendedores</title>
</head>
<body>

<h2>Login Vendedores</h2>

<form id="loginForm">
  <label for="usuario">Usuario:</label>
  <input type="text" id="usuario" name="usuario" required><br><br>
  <label for="clave">Clave:</label>
  <input type="password" id="clave" name="clave" required><br><br>
  <button type="submit">Ingresar</button>
</form>

<div id="resultado" style="margin-top:20px;"></div>

<script>
const webAppUrl = "https://script.google.com/macros/s/AKfycbwEALHzjz_Okk9GIzEX0rqGhS2KV6y1AgMTBmKilraHEoC6ojH0mKrrQZepWw6Zrw/exec";

document.getElementById("loginForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  
  const usuario = document.getElementById("usuario").value.trim();
  const clave = document.getElementById("clave").value.trim();
  
  const payload = { usuario, clave };

  const resultadoDiv = document.getElementById("resultado");
  resultadoDiv.textContent = "Validando...";

  try {
    const res = await fetch(webAppUrl, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    });

    if (!res.ok) throw new Error("Error al conectar con el servidor");

    const data = await res.json();
    
    if(data.success) {
      resultadoDiv.textContent = "Login exitoso. Vendedores disponibles: " + data.vendedores.length;
      console.log("Plataformas:", data.plataformas);
    } else {
      resultadoDiv.textContent = "Error: " + data.message;
    }

  } catch (err) {
    resultadoDiv.textContent = "Error al conectar con el servidor: " + err.message;
    console.error(err);
  }
});
</script>

</body>
</html>
